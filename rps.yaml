# rps.yaml - Configuration file cho RPS scripts
scripts:
  # Formatting commands
  format: "dart format lib/ test/ --set-exit-if-changed"
  format-check: "dart format lib/ test/ --set-exit-if-changed --output=none"

  # Analysis commands
  analyze: "dart analyze --fatal-infos"
  analyze-strict: "dart analyze --fatal-infos --fatal-warnings"
  validate-deps: "dart run dependency_validator"
  license-check: 'very_good packages check licenses --forbidden="GPL-2.0,GPL-3.0,LGPL-2.1,LGPL-3.0,AGPL-3.0,unknown,CC-BY-SA-4.0,SSPL-1.0" --dependency-type="direct-main,direct-dev"'

  # Combined commands
  check: "dart format lib/ test/ --set-exit-if-changed && dart analyze --fatal-infos"
  check-strict: "dart format lib/ test/ --set-exit-if-changed && dart analyze --fatal-infos --fatal-warnings"
  check-all: 'dart format lib/ test/ --set-exit-if-changed && dart analyze --fatal-infos && dart run dependency_validator && very_good packages check licenses --forbidden="GPL-2.0,GPL-3.0,LGPL-2.1,LGPL-3.0,AGPL-3.0,unknown,CC-BY-SA-4.0,SSPL-1.0" --dependency-type="direct-main,direct-dev"'

  # Testing commands
  test: "flutter test"
  test-coverage: "flutter test --coverage && genhtml coverage/lcov.info -o coverage/html"

  # Build commands
  build-android: "flutter build apk --release"
  build-ios: "flutter build ios --release"
  build-web: "flutter build web --release"

  # Environment-specific build commands
  build-dev: "flutter build apk --debug --dart-define=ENVIRONMENT=development"
  build-staging: "flutter build apk --release --dart-define=ENVIRONMENT=staging"
  build-prod: "flutter build apk --release --dart-define=ENVIRONMENT=production"

  # Environment-specific run commands
  run-dev: "flutter run --dart-define=ENVIRONMENT=development --target=lib/main_development.dart"
  run-staging: "flutter run --dart-define=ENVIRONMENT=staging --target=lib/main_staging.dart"
  run-prod: "flutter run --dart-define=ENVIRONMENT=production --target=lib/main_production.dart"

  # Environment configuration commands
  # Usage: Run specific environment setup before development/testing
  # Example: dart run rps generate-env-dev && dart run rps run-dev

  # Generate development environment (most common for daily development)
  generate-env-dev: "dart run build_runner clean && dart run build_runner build --define=envied_generator:envied=path=lib/features/env/development.env --delete-conflicting-outputs"

  # Generate staging environment (for testing staging configs)
  generate-env-staging: "dart run build_runner clean && dart run build_runner build --define=envied_generator:envied=path=lib/features/env/staging.env --delete-conflicting-outputs"

  # Generate production environment (for release builds)
  generate-env-prod: "dart run build_runner clean && dart run build_runner build --define=envied_generator:envied=path=lib/features/env/production.env --delete-conflicting-outputs"

  # Custom development commands
  clean: "flutter clean && flutter pub get"
  reset: "flutter clean && flutter pub get && flutter pub run build_runner build --delete-conflicting-outputs"

  # Git hooks simulation
  pre-commit: "fvm dart format lib/ test/ --set-exit-if-changed && fvm dart analyze --fatal-infos && make test"

  # Team setup commands
  setup: "flutter pub get && lefthook install"
  setup-full: "flutter clean && flutter pub get && lefthook install && dart run tool/validate_commit.dart --help || echo 'Commit validator ready'"

  # Git hooks management
  hooks-install: "lefthook install"
  hooks-uninstall: "lefthook uninstall"

  # Test commit validation
  test-commit-validation: "echo 'feat(test): add validation example' > .tmp/test_commit && dart run tool/validate_commit.dart .tmp/test_commit && rm .tmp/test_commit"
