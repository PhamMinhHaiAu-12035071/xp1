# lefthook.yml
# Official git hooks only - custom commands moved to scripts/ and Makefile

# Official git hooks with scripts + Makefile integration
pre-commit:
  parallel: true
  commands:
    # Format and fix code first (staged files only)
    rps-pre-commit:
      glob: "*.dart"
      run: fvm flutter pub run rps pre-commit
      stage_fixed: true
    # Quick spell check on staged files 
    spell-check-quick:
      glob: "*.md"
      run: npx cspell --config cspell.json {staged_files} --no-progress || echo "⚠️ Fix spelling issues"
    # Quick format check (fast)
    format-check:
      glob: "*.dart"
      run: fvm dart format lib/ test/ --set-exit-if-changed --output=none
    # Quick analysis (staged files only)
    analyze-quick:
      glob: "*.dart"
      run: fvm flutter analyze --fatal-infos

pre-push:
  commands:
    # Run complete CI pipeline via Makefile
    full-ci-pipeline:
      run: make local-ci

commit-msg:
  commands:
    conventional-commit:
      run: fvm dart run tools/validate_commit.dart {1}
